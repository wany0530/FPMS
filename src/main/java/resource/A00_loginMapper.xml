<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="zenkit.web.dao.A00_LoginDao">
	
	<!-- 유저 정보 -->
	<select id="login" resultType="userInfoDetail" parameterType="user">
		SELECT u.*, d.d_name, pos.pos_name, r.r_name
		  FROM Z_USER u, Z_DEPARTMENT d, Z_POSITION pos, Z_RANK r
		 WHERE u.d_no = d.d_no
		 	AND u.pos_no = pos.pos_no
		   AND u.r_no = r.r_no
		   AND u.u_id = #{u_id}
		   AND u.u_pass = #{u_pass}
	</select>
	
	<!-- 유저 유무 -->
	<select id="getUserInfo" resultType="user" parameterType="user">
		SELECT *
		  FROM Z_USER
		 WHERE u_id = #{u_id}
		   AND u_email = #{u_email}
	</select>
		
	<!-- 유저 정보 업데이트 -->
	<update id="updateUserInfo" parameterType="user">
		UPDATE Z_USER
		   SET u_email = #{u_email},
				 u_phone = #{u_phone},
				 u_img = #{u_img}
		 WHERE u_id = #{u_id}
	</update>
	
	<!-- 비밀번호 변경 -->
	<update id="updatePwd" parameterType="user">
		UPDATE Z_USER
		   SET u_pass = #{u_pass}
		 WHERE u_id = #{u_id}
	</update>	
	
</mapper>